<div class="tab-pane fade" id="pills-home" role="tabpanel"
    aria-labelledby="pills-home-tab" tabindex="0">
    <div class="card card-body shadow-none">
        <div class="row g-3">
            <div class="col-md-6 col-lg5">
                <div
                    class="card bg-lightGray card-check card-selected shadow-sm h-100">
                    <div class="card-body text-center">
                        <h5 class="card-title">A101</h5>
                        <div
                            class="badge bg-label-secondary rounded-pill mb-2">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <span
                                        class="ti-xs ti ti-droplet me-1"></span>
                                </div>
                                <div
                                    class="flex-grow-1 ms-2 lh-base text-wrap">
                                    ยังไม่ได้กำหนดค่าน้ำ
                                </div>
                            </div>
                        </div>
                        <div class="badge bg-label-secondary rounded-pill">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <span
                                        class="ti-xs ti ti-plug me-1"></span>
                                </div>
                                <div
                                    class="flex-grow-1 ms-2 lh-base text-wrap">
                                    ยังไม่ได้กำหนดค่าไฟ
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg5">
                <div
                    class="card bg-lightGray card-check card-selected shadow-sm">
                    <div class="card-body text-center">
                        <h5 class="card-title">A102</h5>
                        <div class="badge bg-label-info rounded-pill mb-2">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <span
                                        class="ti-xs ti ti-droplet me-1"></span>
                                </div>
                                <div
                                    class="flex-grow-1 ms-2 lh-base text-wrap">
                                    18 บาท/ยูนิต ขั้นต่ำ 100 บาท
                                </div>
                            </div>
                        </div>
                        <div class="badge bg-label-danger rounded-pill">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <span
                                        class="ti-xs ti ti-plug me-1"></span>
                                </div>
                                <div
                                    class="flex-grow-1 ms-2 lh-base text-wrap">
                                    7 บาท/ยูนิต ขั้นต่อ 100 บาท
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg5">
                <div class="card bg-lightGray card-check shadow-sm">
                    <div class="card-body text-center">
                        <h5 class="card-title">A103</h5>
                        <div class="badge bg-label-info rounded-pill mb-2">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <span
                                        class="ti-xs ti ti-droplet me-1"></span>
                                </div>
                                <div
                                    class="flex-grow-1 ms-2 lh-base text-wrap">
                                    18 บาท/ยูนิต ขั้นต่ำ 100 บาท
                                </div>
                            </div>
                        </div>
                        <div class="badge bg-label-danger rounded-pill">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <span
                                        class="ti-xs ti ti-plug me-1"></span>
                                </div>
                                <div
                                    class="flex-grow-1 ms-2 lh-base text-wrap">
                                    7 บาท/ยูนิต ขั้นต่อ 100 บาท
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg5">
                <div class="card bg-lightGray card-check shadow-sm">
                    <div class="card-body text-center">
                        <h5 class="card-title">A104</h5>
                        <div class="badge bg-label-info rounded-pill mb-2">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <span
                                        class="ti-xs ti ti-droplet me-1"></span>
                                </div>
                                <div
                                    class="flex-grow-1 ms-2 lh-base text-wrap">
                                    18 บาท/ยูนิต ขั้นต่ำ 100 บาท
                                </div>
                            </div>
                        </div>
                        <div class="badge bg-label-danger rounded-pill">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <span
                                        class="ti-xs ti ti-plug me-1"></span>
                                </div>
                                <div
                                    class="flex-grow-1 ms-2 lh-base text-wrap">
                                    7 บาท/ยูนิต ขั้นต่อ 100 บาท
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg5">
                <div class="card bg-lightGray card-check shadow-sm">
                    <div class="card-body text-center">
                        <h5 class="card-title">A105</h5>
                        <div class="badge bg-label-info rounded-pill mb-2">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <span
                                        class="ti-xs ti ti-droplet me-1"></span>
                                </div>
                                <div
                                    class="flex-grow-1 ms-2 lh-base text-wrap">
                                    18 บาท/ยูนิต ขั้นต่ำ 100 บาท
                                </div>
                            </div>
                        </div>
                        <div class="badge bg-label-danger rounded-pill">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <span
                                        class="ti-xs ti ti-plug me-1"></span>
                                </div>
                                <div
                                    class="flex-grow-1 ms-2 lh-base text-wrap">
                                    7 บาท/ยูนิต ขั้นต่อ 100 บาท
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg5">
                <div class="card bg-lightGray card-check shadow-sm h-100">
                    <div class="card-body text-center">
                        <h5 class="card-title">A106</h5>
                        <div
                            class="badge bg-label-secondary rounded-pill mb-2">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <span
                                        class="ti-xs ti ti-droplet me-1"></span>
                                </div>
                                <div
                                    class="flex-grow-1 ms-2 lh-base text-wrap">
                                    ยังไม่ได้กำหนดค่าน้ำ
                                </div>
                            </div>
                        </div>
                        <div class="badge bg-label-secondary rounded-pill">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <span
                                        class="ti-xs ti ti-plug me-1"></span>
                                </div>
                                <div
                                    class="flex-grow-1 ms-2 lh-base text-wrap">
                                    ยังไม่ได้กำหนดค่าไฟ
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg5">
                <div class="card bg-lightGray card-check shadow-sm h-100">
                    <div class="card-body text-center">
                        <h5 class="card-title">A107</h5>
                        <div
                            class="badge bg-label-secondary rounded-pill mb-2">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <span
                                        class="ti-xs ti ti-droplet me-1"></span>
                                </div>
                                <div
                                    class="flex-grow-1 ms-2 lh-base text-wrap">
                                    ยังไม่ได้กำหนดค่าน้ำ
                                </div>
                            </div>
                        </div>
                        <div class="badge bg-label-secondary rounded-pill">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <span
                                        class="ti-xs ti ti-plug me-1"></span>
                                </div>
                                <div
                                    class="flex-grow-1 ms-2 lh-base text-wrap">
                                    ยังไม่ได้กำหนดค่าไฟ
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg5">
                <div class="card bg-lightGray card-check shadow-sm h-100">
                    <div class="card-body text-center">
                        <h5 class="card-title">A108</h5>
                        <div
                            class="badge bg-label-secondary rounded-pill mb-2">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <span
                                        class="ti-xs ti ti-droplet me-1"></span>
                                </div>
                                <div
                                    class="flex-grow-1 ms-2 lh-base text-wrap">
                                    ยังไม่ได้กำหนดค่าน้ำ
                                </div>
                            </div>
                        </div>
                        <div class="badge bg-label-secondary rounded-pill">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <span
                                        class="ti-xs ti ti-plug me-1"></span>
                                </div>
                                <div
                                    class="flex-grow-1 ms-2 lh-base text-wrap">
                                    ยังไม่ได้กำหนดค่าไฟ
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg5">
                <div class="card bg-lightGray card-check shadow-sm h-100">
                    <div class="card-body text-center">
                        <h5 class="card-title">A109</h5>
                        <div
                            class="badge bg-label-secondary rounded-pill mb-2">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <span
                                        class="ti-xs ti ti-droplet me-1"></span>
                                </div>
                                <div
                                    class="flex-grow-1 ms-2 lh-base text-wrap">
                                    ยังไม่ได้กำหนดค่าน้ำ
                                </div>
                            </div>
                        </div>
                        <div class="badge bg-label-secondary rounded-pill">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <span
                                        class="ti-xs ti ti-plug me-1"></span>
                                </div>
                                <div
                                    class="flex-grow-1 ms-2 lh-base text-wrap">
                                    ยังไม่ได้กำหนดค่าไฟ
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg5">
                <div class="card bg-lightGray card-check shadow-sm h-100">
                    <div class="card-body text-center">
                        <h5 class="card-title">A110</h5>
                        <div
                            class="badge bg-label-secondary rounded-pill mb-2">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <span
                                        class="ti-xs ti ti-droplet me-1"></span>
                                </div>
                                <div
                                    class="flex-grow-1 ms-2 lh-base text-wrap">
                                    ยังไม่ได้กำหนดค่าน้ำ
                                </div>
                            </div>
                        </div>
                        <div class="badge bg-label-secondary rounded-pill">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <span
                                        class="ti-xs ti ti-plug me-1"></span>
                                </div>
                                <div
                                    class="flex-grow-1 ms-2 lh-base text-wrap">
                                    ยังไม่ได้กำหนดค่าไฟ
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="tab-pane fade show active" id="pills-profile" role="tabpanel"
    aria-labelledby="pills-profile-tab" tabindex="0">
    <table class="datatables-basic table dataTable no-footer dtr-column"
        id="DataTables_Table_0" aria-describedby="DataTables_Table_0_info">
        <thead>
            <tr class="bg-label-warning">
                <th class="control sorting_disabled dtr-hidden" rowspan="1"
                    colspan="1" style="width: 0px; display: none;"
                    aria-label=""></th>
                <th class="sorting_disabled dt-checkboxes-cell dt-checkboxes-select-all"
                    rowspan="1" colspan="1" style="width: 18px;"
                    data-col="1" aria-label=""><input type="checkbox"
                        class="form-check-input"></th>
                <th class="sorting" tabindex="0"
                    aria-controls="DataTables_Table_0" rowspan="1"
                    colspan="1"
                    aria-label="Name: activate to sort column ascending">
                    ห้อง</th>
                <th class="sorting" tabindex="0"
                    aria-controls="DataTables_Table_0" rowspan="1"
                    colspan="1"
                    aria-label="Email: activate to sort column ascending">
                    ค่าน้ำ</th>
                <th class="sorting" tabindex="0"
                    aria-controls="DataTables_Table_0" rowspan="1"
                    colspan="1"
                    aria-label="Date: activate to sort column ascending">
                    ค่าไฟ</th>
                <th class="sorting_disabled" rowspan="1" colspan="1"
                    aria-label="Actions">Actions</th>
            </tr>
        </thead>
        <tbody>
            {{-- <tr class="odd">
                <td class="  control" tabindex="0" style="display: none;">
                </td>
                <td class="  dt-checkboxes-cell"><input type="checkbox"
                        class="dt-checkboxes form-check-input"></td>
                <td>A101</td>
                <td><span
                        class="badge  bg-label-secondary rounded-pill"><span
                            class="ti-xs ti ti-droplet me-1"></span>ยังไม่ได้กำหนดค่าน้ำ</span>
                </td>
                <td><span
                        class="badge bg-label-secondary rounded-pill"><span
                            class="ti-xs ti ti-plug me-1"></span>ยังไม่ได้กำหนดค่าไฟ</span>
                </td>
                <td class="d-flex flex-row">
                    <button type="button"
                        class="btn btn-info btn-sm rounded-pill waves-effect waves-light me-md-2 mb-2 mb-md-0"
                        data-bs-toggle="modal"
                        data-bs-target="#setWaterModal">
                        <span
                            class="ti-xs ti ti-droplet me-2"></span>กำหนดค่าน้ำ
                    </button>
                    <button type="button"
                        class="btn btn-danger btn-sm rounded-pill waves-effect waves-light me-md-2 mb-2 mb-md-0"
                        data-bs-toggle="modal"
                        data-bs-target="#setElectricModal">
                        <span
                            class="ti-xs ti ti-plug me-2"></span>กำหนดค่าไฟ
                    </button>
                </td>
            </tr> --}}
            @foreach ($list_data as $row)
                <tr class="even">
                    <td class="control" tabindex="0" style="display: none;">
                    </td>
                    <td class="dt-checkboxes-cell">
                        <input type="checkbox" class="dt-checkboxes form-check-input ids" value="{{ $row->id }}">
                    </td>
                    <td>{{ $row->name }}</td>
                    <td>
                        @if (!in_array($row->how_to_cal_water, [null,0]))
                            <span class="badge  bg-label-info rounded-pill">
                            <span class="ti-xs ti ti-droplet"></span>
                            @if ($row->how_to_cal_water == 1)
                                {{ floor($row->water_monthly_rental) == $row->water_monthly_rental ? floor($row->water_monthly_rental) : $row->water_monthly_rental ; }}
                                บาท/เดือน
                            @elseif ($row->how_to_cal_water == 3)
                                {{ floor($row->water_baht_per_unit) == $row->water_baht_per_unit ? floor($row->water_baht_per_unit) : $row->water_baht_per_unit ; }}
                                บาท/ยูนิต
                            @elseif ($row->how_to_cal_water == 4)
                            ขั้นต่อ 100 บาท
                            @endif
                            </span>
                        @else
                        <span class="badge  bg-label-secondary rounded-pill">
                            <span class="ti-xs ti ti-droplet me-1"></span>ยังไม่ได้กำหนดค่าน้ำ</span>
                        @endif
                    </td>
                    <td>
                        @if (!in_array($row->how_to_cal_ele, [null,0]))
                            <span class="badge bg-label-danger rounded-pill">
                            <span class="ti-xs ti ti-plug"></span>
                            @if ($row->how_to_cal_ele == 1)
                                {{ floor($row->ele_monthly_rental) == $row->ele_monthly_rental ? floor($row->ele_monthly_rental) : $row->ele_monthly_rental ; }}
                                บาท/เดือน
                            @elseif ($row->how_to_cal_ele == 2)
                                {{ floor($row->ele_baht_per_unit) == $row->ele_baht_per_unit ? floor($row->ele_baht_per_unit) : $row->ele_baht_per_unit ; }}
                                บาท/ยูนิต
                            @elseif ($row->how_to_cal_ele == 3)
                                {{ $row->ele_baht_per_unit }} บาท/ยูนิต
                                ขั้นต่อ 100 บาท
                            @endif
                            </span>
                        @else
                        <span class="badge  bg-label-secondary rounded-pill">
                            <span class="ti-xs ti ti-droplet me-1"></span>ยังไม่ได้กำหนดค่าไฟ</span>
                        @endif
                    </td>
                    <td class="d-flex flex-row">
                        <button type="button"
                            class="btn btn-info btn-sm rounded-pill waves-effect waves-light me-md-2 mb-2 mb-md-0"
                            data-bs-toggle="modal"
                            data-bs-target="#setWaterModal"
                            onclick="view_water({{ $row->id }})"
                            >
                            <span
                                class="ti-xs ti ti-droplet me-2"></span>กำหนดค่าน้ำ
                        </button>
                        <button type="button"
                            class="btn btn-danger btn-sm rounded-pill waves-effect waves-light me-md-2 mb-2 mb-md-0"
                            data-bs-toggle="modal"
                            data-bs-target="#setElectricModal"
                            onclick="view_electric({{ $row->id }})"
                            >
                            <span
                                class="ti-xs ti ti-plug me-2"></span>กำหนดค่าไฟ
                        </button>
                    </td>
                </tr>
            @endforeach
        </tbody>
    </table>
    
@include('layout/pagination')
</div>
<script>
    $(document).ready(function () {
        // เมื่อคลิกที่ checkbox ใน <th>
        $('.dt-checkboxes-select-all input[type="checkbox"]').on('change', function () {
            // ตรวจสอบสถานะของ checkbox ใน <th>
            var isChecked = $(this).prop('checked');
            
            // ทำให้ checkbox ทุกอันใน <td> ถูกเช็คหรือยกเลิกการเช็ค
            $('td.dt-checkboxes-cell input[type="checkbox"]').prop('checked', isChecked);
            checkNoChecked();
        });

        // เมื่อคลิกที่ checkbox ใน <td> (ตรวจสอบสถานะของทุก checkbox)
        $('td.dt-checkboxes-cell input[type="checkbox"]').on('change', function () {
            // ตรวจสอบว่า checkbox ใน <td> ถูกเช็คหรือไม่
            var allChecked = $('td.dt-checkboxes-cell input[type="checkbox"]').length === $('td.dt-checkboxes-cell input[type="checkbox"]:checked').length;
            
            // ถ้าทุก checkbox ใน <td> ถูกเช็ค จะทำให้ checkbox ใน <th> ถูกเช็ค
            $('.dt-checkboxes-select-all input[type="checkbox"]').prop('checked', allChecked);
            checkNoChecked();
        });
        
    });
    checkNoChecked();
    function checkNoChecked() {
        if ($('td.dt-checkboxes-cell input[type="checkbox"]:checked').length === 0) {
        // ทำให้ปุ่มถูก disabled
            $('#edit-rent').prop('disabled', true);
        } else {
            // ถ้ามี checkbox ถูกเช็ค ให้เปิดใช้งานปุ่ม
            $('#edit-rent').prop('disabled', false);
        }
    }
</script>